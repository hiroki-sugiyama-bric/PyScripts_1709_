GET https://qvc.jp/cont/recom/GetDt?merch=qvc&spec=10&num=5&reqdom=aigent2.silveregg.net&reqtype=1&serverId=1 HTTP/1.1
Host: qvc.jp
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:52.0) Gecko/20100101 Firefox/52.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: ja,en-US;q=0.7,en;q=0.3
Referer: https://qvc.jp/cont/recom/Rq?spec=10&num=5&serverId=1
Cookie: JSESSIONID=9111EDC20EBF176EE3638B44F87CFDD2; uniqueid=f0b95f09-58f0-46bf-9c12-7724c360520c; CK_SERVERID=1; _libra=oOH0I4i73Ar4kEILo3866BObiqBsc6XmkfHBLP32B4rYKdBDLIjBbZnIcepdv57iVaUudWBX5cZM; s_cc=true; s_fid=6EDF1492B909393E-3DC5C71134357C5E; sc_visit=1; sc_segmsest=1491558701749; sc_segmhis=1491558701749; sc_segm=1; s_cvp_1=%5B%5B%27DIR%27%2C%271491558701751%27%5D%5D; s_cvp_2=%5B%5B%27DIR%27%2C%271491558701751%27%5D%5D; s_product=%5BPC%5D%3AOther; sc_prevFlag=F; sc_prevpage=%5BPC%5D%3Aqvc.jp%2FCustomerMenu.do; s_sq=%5B%5BB%5D%5D; custid=73790398; s_vi=[CS]v1|2C73B37E0548B07F-40000105E00007B0[CE]; YTM_PV=2; __ar_v4=; _vz=viz_58e766f82b98d; curntChnl=QVC; saasData="https://aigent.silveregg.net/pycre5/click?merch=qvc|891165621|73790398"
Connection: close
Upgrade-Insecure-Requests: 1


HTTP/1.1 200 OK
Content-Type: text/html;charset=windows-31j
Content-Length: 4502
Cache-Control: private,no-store,no-cache,must-revalidate
Pragma: no-cache
Date: Fri, 07 Apr 2017 10:39:30 GMT
Connection: close
Set-Cookie: CK_SERVERID=1; path=/
Set-Cookie: CK_SERVERID=1; path=/










	<script type="text/javascript" language="JavaScript" src="/script/jquery-1.2.3.min.js"></script>
	<script type="text/javascript" language="JavaScript" src="/script/jquery.cookie.js"></script>


	
	

































	





	<SCRIPT type="text/javascript" language="JavaScript">



	<!--
		
		/*
		 * リクエストパラメータを解析して
		 * key : value[]型で保持
		 */
		getRequestParameter = (function() {
			var map = {};
			var query = location.search;
			if (query != null && query.length > 0) {
				var matchResult = query.match(/[?&][^?&]+=[^?&]*/g)
				for (var i = 0, max = matchResult.length;i < max;i++) {
					var pair = matchResult[i].match(/[?&]([^=]+)=([^=]*)/);
					var key = RegExp.$1;
					var val = RegExp.$2;
					var values;
					if (map[key] == null) {
						values = new Array();
					} else {
						values = map[key];
					}
					values.push(val);
					map[key] = values;
				}
			}
			return {
				get : function(key) {
					return (map[key] == null)? (new Array()) : map[key];
				}
			};
		})();

		
		
		var prod = getRequestParameter.get("prod");
		var prod2 = getRequestParameter.get("prod2");
		var prod3 = getRequestParameter.get("prod3");
		var prod4 = getRequestParameter.get("prod4");
		var prod5 = getRequestParameter.get("prod5");
		var prod6 = getRequestParameter.get("prod6");
		var prod7 = getRequestParameter.get("prod7");
		var prod8 = getRequestParameter.get("prod8");
		var prod9 = getRequestParameter.get("prod9");
		var prod10 = getRequestParameter.get("prod10");
		var spec = getRequestParameter.get("spec");
		var num = getRequestParameter.get("num");
		var cat = getRequestParameter.get("cat");
		var pcat = getRequestParameter.get("pcat");

		var reqdom = getRequestParameter.get("reqdom");
		var reqtype = getRequestParameter.get("reqtype");
		var reqhinban = getRequestParameter.get("reqhinban");
		var xprod1 = getRequestParameter.get("xprod1");
		var xprod2 = getRequestParameter.get("xprod2");
		var xprod3 = getRequestParameter.get("xprod3");
		var xprod4 = getRequestParameter.get("xprod4");
		var xprod5 = getRequestParameter.get("xprod5");
		var xprod6 = getRequestParameter.get("xprod6");
		var xprod7 = getRequestParameter.get("xprod7");
		var xprod8 = getRequestParameter.get("xprod8");
		var xprod9 = getRequestParameter.get("xprod9");
		var xprod10 = getRequestParameter.get("xprod10");
		var flag = getRequestParameter.get("flag");
		var cref = getRequestParameter.get("cref");
		var clickspec = getRequestParameter.get("clickspec");
		


		var sesskey = $.cookie("JSESSIONID");
		var custid = $.cookie("custid");
		if (custid == null) {
			custid= sesskey ;
		}
//alert("prod:"+prod+" spec:"+spec+" num:"+num+" cat:"+cat + " requrl:"+requrl+" reqtype:"+reqtype)

		// request for recommend data
		var arg ="";
		var argIndex = 0;
		var getCref ="";
		$.ajax({
			type : "POST",
			url : "/AigentConnect",
			data : {
				"prod" : prod,
				"prod2" : prod2,
				"prod3" : prod3,
				"prod4" : prod4,
				"prod5" : prod5,
				"prod6" : prod6,
				"prod7" : prod7,
				"prod8" : prod8,
				"prod9" : prod9,
				"prod10" : prod10,
				"reqhinban" : reqhinban,
				"flag" : flag,
				"xprod1" : xprod1,
				"xprod2" : xprod2,
				"xprod3" : xprod3,
				"xprod4" : xprod4,
				"xprod5" : xprod5,
				"xprod6" : xprod6,
				"xprod7" : xprod7,
				"xprod8" : xprod8,
				"xprod9" : xprod9,
				"xprod10" : xprod10,
				"spec" : spec,
				"cat" : cat,
				"num" : num,
				"cref" : cref,
				"cookie" : custid,
				"sess" : sesskey,
				"clickspec" : clickspec,
				"reqdom" : reqdom,
				"reqtype" : reqtype,
				"serverId" : "1"
			},
			dataType : "json",
			success: function (data, textStatus, jqXHR) {
				$.each(data.itemList , function(index,element){
					argIndex = argIndex + 1 ;
					if (index == 0){
						arg = "prod" + argIndex + "=" + element.id;
					} else {
						arg = arg + "&prod" + argIndex + "=" + element.id;
					}
					getCref = element.cref;
				});
				var loopcnt = 0;
				loopcnt = data.itemList.length ;

				for ( var i = 5 ; i > loopcnt ; i--  ){
					arg = arg + "&prod" + i + "=";
				}
				
				arg = arg +"&prod6=&prod7=&prod8=&prod9=&prod10=&prod11=&prod12=&prod13=&prod14=&prod15=&prod16=&prod17=&prod18=&prod19=&prod20=&cref="+getCref;
				location.replace("/cont/recom/Rs?merch=qvc&spec="+spec+"&num="+num+"&cat="+cat+"&pcat="+pcat+"&maxprice=&"+arg+"&serverId=1") ;

			},
			error:  function(xhr, status, error) {
		        // 通信失敗時の処理
		    }
		});





	//-->
	</SCRIPT>
